//xz-notify.min.js,2.0.0,https://github.com/dknight/xz-notify
"use strict";const t=class extends HTMLElement{constructor(i,e,s=!1,o=t.defaults.GROUPED,a=t.positions.NE,n=t.defaults.EXPIRE,l=t.defaults.TYPE,h=!0,c){super(),this.root=i,this.styleElem=e,this.forcedClose=s,this.grouped=o,this.position=a,this.expire=n,this.type=l,this.closeable=h,this.heading=c,this.root=this.attachShadow({mode:"open"}),this.styleElem=document.createElement("style"),this.styleElem.textContent=':host{--xz-notify-background-color: #f7f7f7;--xz-notify-heading-color: currentColor;--xz-notify-zIndex: auto;display:block;position:fixed;left:var(--xz-notify-left);top:var(--xz-notify-top);border-radius:0;border:0 solid;font-family:system-ui,-apple-system,Arial,sans-serif;font-size:16px;font-weight:400;line-height:normal;margin:.5em;padding:1.5em;width:fit-content;max-width:28em;min-width:18em;height:auto;z-index:var(--xz-notify-zIndex);animation:xz-notify-toggle .25s ease-in;background:var(--xz-notify-background-color) linear-gradient(to right,var(--xz-notify-heading-color) .25em,transparent 0);border-color:transparent;color:#666}:host([data-closing]){animation-direction:reverse;animation-iteration-count:2}@keyframes xz-notify-toggle{0%{opacity:0}to{opacity:1}}:host([closeable]){cursor:pointer}:host([closeable]:hover):after{content:"";display:block;width:100%;height:100%;background:rgba(0,0,0,.05);position:absolute;top:0;left:0;pointer-events:none}:host p{margin-top:0}:host a{color:currentColor}:host .heading{color:var(--xz-notify-heading-color, currentColor);font-size:125%;margin:0 0 .5em}:host([type="info"]){--xz-notify-heading-color: #4d4dff;--xz-notify-background-color: #f6f6ff}:host([type="success"]){--xz-notify-heading-color: #2ec946;--xz-notify-background-color: #f4fcf6}:host([type="warning"]){--xz-notify-heading-color: #ffba00;--xz-notify-background-color: #fffbf2}:host([type="error"]){--xz-notify-heading-color: #ff3838;--xz-notify-background-color: #fff5f5}'}setPosition(){const i=this.grouped?0:this.findIndex(),[e,s]=this.calcBasePosition(),[o,a]=this.calcOffsetPosition(i);if(this.style.setProperty("--xz-notify-left",`calc(${e} - ${o}px)`),this.style.setProperty("--xz-notify-top",`calc(${s} + ${a}px)`),this.grouped){const n=t.collection[this.position].length;this.style.setProperty("--xz-notify-zIndex",String(1e4-n))}}findIndex(){return t.collection[this.position].findIndex(i=>i===this)}calcBasePosition(){switch(this.position){case t.positions.N:return["50%","0%"];default:case t.positions.NE:return["100%","0%"];case t.positions.E:return["100%","50%"];case t.positions.SE:return["100%","100%"];case t.positions.S:return["50%","100%"];case t.positions.SW:return["0%","100%"];case t.positions.W:return["0%","50%"];case t.positions.NW:return["0%","0%"]}}calcOffsetPosition(i){const e=this.getBoundingClientRect(),s=getComputedStyle(this),o=Number.parseInt(s.getPropertyValue("margin-top")),a=Number.parseInt(s.getPropertyValue("margin-right")),n=Number.parseInt(s.getPropertyValue("margin-bottom")),l=Number.parseInt(s.getPropertyValue("margin-left"));switch(this.position){case t.positions.N:return[e.width/2,i*(e.height+o)];default:case t.positions.NE:return[e.width+l+a,i*(e.height+o)];case t.positions.E:return[(i+1)*(e.width+l+a),-(e.height/2+o+n)];case t.positions.SE:return[e.width+l+a,-(i+1)*(e.height+o+n)];case t.positions.S:return[e.width/2,-(i+1)*(e.height+o+n)];case t.positions.SW:return[0,-(i+1)*(e.height+o+n)];case t.positions.W:return[i*-(e.width+l),-(e.height/2+o+n)];case t.positions.NW:return[0,i*(e.height+o)]}}setPositionAll(){Object.values(t.collection).forEach(i=>{i.forEach(e=>this.setPosition.call(e))})}connectedCallback(){this.reflectToProperties(),t.collection[this.position].push(this),this.dispatchEvent(t.events.OPEN),this.render(),this.hydrate()}reflectToProperties(){const i=this.getAttribute("type")||t.defaults.TYPE;this.type=i.toLowerCase(),this.position=(this.getAttribute("position")||t.positions.NE).toLowerCase();const e=this.getAttribute("expire");e===null||Number.isNaN(Number(e))?this.expire=t.defaults.EXPIRE:this.expire=Number(e),this.closeable=this.hasAttribute("closeable"),this.heading=this.getAttribute("heading"),this.grouped=this.hasAttribute("grouped")}render(){this.root.append(this.styleElem),this.heading&&this.root.appendChild(this.buildHeading()),this.root.append(...this.childNodes),this.setAttribute("role","alert")}buildHeading(){const i=document.createElement("h3");return this.heading&&(i.innerText=this.heading),i.classList.add("heading"),i}hydrate(){const i=Number.parseFloat(window.getComputedStyle(this).getPropertyValue("animation-duration"))>0;this.setPosition();let e;const s=o=>{if(e===void 0&&(e=o),o-e>=this.expire||this.forcedClose){this.dataset.closing="true",i?this.style.animationPlayState="running":this.close();return}requestAnimationFrame(s)};requestAnimationFrame(s),this.addEventListener("animationend",this.close),this.closeable&&this.addEventListener("click",this.closeHandler.bind(this))}close(){if(!this.dataset.closing){this.style.animationPlayState="paused";return}this.dispatchEvent(t.events.CLOSE),this.remove()}closeHandler(i){this.forcedClose=!0}disconnectedCallback(){t.collection[this.position]=t.collection[this.position].filter(i=>i!==this),this.setPositionAll()}};let r=t;r.TAG_NAME="xz-notify",r.observedAttributes=[],r.types={DEFAULT:"default",INFO:"info",WARNING:"warning",SUCCESS:"success",ERROR:"error"},r.events={OPEN:new CustomEvent("xz-notify:open",{bubbles:!0}),CLOSE:new CustomEvent("xz-notify:close",{bubbles:!0})},r.positions={N:"n",NE:"ne",E:"e",SE:"se",S:"s",SW:"sw",W:"w",NW:"nw"},r.collection={[t.positions.N]:[],[t.positions.NE]:[],[t.positions.E]:[],[t.positions.SE]:[],[t.positions.S]:[],[t.positions.SW]:[],[t.positions.W]:[],[t.positions.NW]:[]},r.defaults={EXPIRE:1e4,TYPE:t.types.INFO,POSITION:t.positions.NE,CLOSEABLE:!1,GROUPED:!1,HEADING:null},r.create=(i,e={},s=!1)=>{const o=document.createElement(t.TAG_NAME);return Object.entries(e).forEach(([a,n])=>{n===!1||n===null||o.setAttribute(a,String(n))}),o[s?"innerHTML":"textContent"]=i,o},window.customElements.define(r.TAG_NAME,r);export default r;
//# sourceMappingURL=xz-notify.min.js.map
